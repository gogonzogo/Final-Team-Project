{"version":3,"file":"static/js/209.087330e6.chunk.js","mappings":"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","sources":["components/Container/Container.jsx","webpack://final-team-project/./src/components/LoginForm/login.module.css?916a","components/LoginForm/LoginForm.jsx","pages/Login/Login.jsx","redux/validation/registrationSelectors.js"],"sourcesContent":["import { node, string } from 'prop-types';\n\nconst Container = ({children, className}) => {\n    return (\n        <div className={className}>{children}</div>\n    )\n};\n\nContainer.propTopes = {\n    children: node.isRequired,\n    className: string\n};\n\nexport default Container ;","// extracted by mini-css-extract-plugin\nexport default {\"form_container\":\"login_form_container__K4jsj\",\"form_title\":\"login_form_title__Wyom9\",\"form_grid\":\"login_form_grid__1MIvp\",\"login_button\":\"login_login_button__DZPBF\",\"register_button\":\"login_register_button__HHbVE\",\"error_message\":\"login_error_message__WE-l0\",\"error_message_valid\":\"login_error_message_valid__NbF4o\",\"button_container\":\"login_button_container__Evbbt\",\"email_input\":\"login_email_input__bl6Jx\"};","import React from 'react';\nimport { useState, useRef } from 'react';\nimport style from '../LoginForm/login.module.css';\nimport { Box, FormControl, TextField, Grid } from '@mui/material';\nimport {  useNavigate } from 'react-router-dom';\nimport { login } from 'redux/auth/authOperations';\nimport { useDispatch, useSelector } from 'react-redux';\nimport {\n  selectIsEmailValid,\n  selectIsPasswordValid,\n} from '../../redux/validation/registrationSelectors';\nimport {\n  validateEmail,\n  validatePassword,\n} from '../../redux/validation/registrationSlice';\nimport { toast } from 'react-toastify';\nimport { getUserInfo } from 'redux/user/userOperations';\nimport { useUser } from 'hooks/useUser';\nimport CustomButton from 'components/CustomButton/CustomButton';\n\nconst LoginForm = () => {\n  const passwordRef = useRef(null);\n  const isEmailValid = useSelector(selectIsEmailValid);\n  const isPasswordValid = useSelector(selectIsPasswordValid);\n  // const isFormValid = useSelector(selectFormIsValid);\n  const dispatch = useDispatch();\n  const { calendarDate } = useUser();\n  const nav = useNavigate(); // react router hook\n  // const validationReqs = useSelector((state) => state.registration.validationReqs); // gets validation requirements from the slice\n\n  // form data state\n  const [formData, setFormData] = useState({\n    email: '',\n    password: '',\n  });\n  // used to set the focused text field\n  const [focusedField, setFocusedField] = useState('');\n\n  // listens to input change\n  const handleChange = e => {\n    const { name, value } = e.target;\n    setFormData({ ...formData, [name]: value });\n    // check if email is valid\n\n    switch (\n      name // dispatches validation reducers from the slice on change\n    ) {\n      case 'email':\n        dispatch(validateEmail({ fieldValue: value }));\n        break;\n      case 'password':\n        dispatch(validatePassword({ fieldValue: value }));\n        break;\n      default:\n        break;\n    }\n  };\n\n  // listens to form submission and looks for errors\n  const [loginError, setLoginError] = useState(null);\n\n  // handles login\n  async function handleLogin() {\n    try {\n      const { email, password } = formData;\n      const senddata = { email: email.toLowerCase(), password };\n      const response = await dispatch(login(senddata));\n      if (response.payload.token) {\n        dispatch(getUserInfo(calendarDate));\n        nav('/diary');\n      }\n    } catch (err) {\n      console.err('Login error', loginError);\n      setLoginError('An error occured. Please try again.');\n      toast.error('An error occured. Please try again.');\n    }\n  }\n\n  // handles form submission\n  function handleSubmit(e) {\n    e.preventDefault();\n    handleLogin(); // calls the login function\n  }\n\n  return (\n    <Box className={style.form_container}>\n      <h2 className={style.form_title}>LOG IN</h2>\n      <Grid className={style.form_grid}>\n        {/* login form */}\n\n        <FormControl variant=\"standard\">\n          <form onSubmit={handleSubmit}>\n            {' '}\n            {/*pass validatioon schema */}\n            <TextField\n              autoComplete=\"email\"\n              className={style.email_input}\n              InputLabelProps={\n                focusedField === 'email' && !isEmailValid\n                  ? { style: { color: 'red' } }\n                  : { style: { color: '#9B9FAA' } }\n              }\n              inputProps={{\n                onKeyPress: event => {\n                  const { key } = event;\n                  if (key === 'Enter') {\n                    passwordRef.current.focus();\n                  }\n                },\n              }}\n              variant=\"standard\"\n              label=\"Email\"\n              type=\"email\"\n              name=\"email\"\n              fullWidth\n              margin=\"normal\"\n              required\n              error={focusedField === 'email' && !isEmailValid}\n              // styles the input field and checks whether email is not valid and when it is valid\n              helperText={\n                !formData.email ? (\n                  'Required'\n                ) : isEmailValid && formData.email.length > 3 ? (\n                  <span className={style.error_message_valid}>Checks out!</span>\n                ) : (\n                  <span className={style.error_message}>Not quite!</span>\n                )\n              }\n              value={formData.email}\n              onChange={handleChange}\n              onFocus={() => setFocusedField('email')}\n            />\n            <TextField\n              autoComplete=\"current-password\"\n              className={style.password_input}\n              InputLabelProps={\n                focusedField === 'password' && !isPasswordValid\n                  ? { style: { color: 'red' } }\n                  : { style: { color: '#9B9FAA' } }\n              }\n              inputRef={passwordRef}\n              variant=\"standard\"\n              label=\"Password\"\n              type=\"password\"\n              name=\"password\"\n              fullWidth\n              margin=\"normal\"\n              required\n              error={focusedField === 'password' && !isPasswordValid}\n              // styles the input field and checks whether password is not valid and when it is valid\n              helperText={\n                !formData.password ? (\n                  'Required'\n                ) : isPasswordValid ? (\n                  <span className={style.error_message_valid}>Checks out!</span>\n                ) : (\n                  <span className={style.error_message}>Not quite!</span>\n                )\n              }\n              value={formData.password}\n              onChange={handleChange}\n              onFocus={() => setFocusedField('password')}\n            />\n            {/* if password is not longer than 5 number and email is not longer than 5 chars then disable button  */}\n            {/* {isEmailValid && isPasswordValid ? (\n              <Box className={style.button_container}>\n                <Button variant=\"contained\" className={style.login_button}>\n                  Log In\n                </Button>\n                <Link to=\"/Register\">\n                  <Button variant=\"contained\" className={style.register_button}>\n                    Register\n                  </Button>\n                </Link>\n              </Box>\n            ) : ( */}\n            <Box className={style.button_container}>\n              <CustomButton\n                color='orange'\n                type=\"submit\"\n                disabled={!isEmailValid || !isPasswordValid}\n                className={style.login_button}\n              >\n                Log In\n              </CustomButton>\n              \n            </Box>\n          </form>\n        </FormControl>\n      </Grid>\n    </Box>\n  );\n};\n\nexport default LoginForm;\n","import React from 'react'\nimport LoginForm from '../../components/LoginForm/LoginForm'\nimport Container from 'components/Container/Container'\n\nfunction Login() {\n  return (\n    // imported my form here to see it get rendered \n    <div className=\"background mainBackground\">\n      <section className=\"top-bottom\">\n        <Container className=\"left-right\">\n          <LoginForm />\n        </Container>\n      </section>\n    </div>\n  )\n}\n\nexport default Login\n","import { createSelector } from 'reselect';\n\n// Select the registration slice from the Redux store\nconst selectRegistration = (state) => state.registration;\n\n// Select individual validation requirements\nexport const selectNameValidationReqs = createSelector(\n  [selectRegistration],\n  (registration) => registration.validationReqs.name\n);\n\nexport const selectEmailValidationReqs = createSelector(\n  [selectRegistration],\n  (registration) => registration.validationReqs.email\n);\n\nexport const selectPasswordValidationReqs = createSelector(\n  [selectRegistration],\n  (registration) => registration.validationReqs.password\n);\n\n// Select individual field validation states - this works then?\nexport const selectIsNameValid = createSelector(\n  [selectRegistration],\n  (registration) => registration.isNameValid \n);\n\nexport const selectIsEmailValid = createSelector(\n  [selectRegistration],\n  (registration) => registration.isEmailValid \n);\n\nexport const selectIsPasswordValid = createSelector(\n  [selectRegistration],\n  (registration) => registration.isPasswordValid \n);\n\n// Select the overall form validity\nexport const selectFormIsValid = createSelector(\n  [selectIsNameValid, selectIsEmailValid, selectIsPasswordValid],\n  (isNameValid, isEmailValid, isPasswordValid) =>\n    isNameValid && isEmailValid && isPasswordValid\n);"],"names":["Container","children","className","propTopes","node","string","passwordRef","useRef","isEmailValid","useSelector","selectIsEmailValid","isPasswordValid","selectIsPasswordValid","dispatch","useDispatch","calendarDate","useUser","nav","useNavigate","useState","email","password","formData","setFormData","focusedField","setFocusedField","handleChange","e","target","name","value","validateEmail","fieldValue","validatePassword","loginError","setLoginError","senddata","toLowerCase","login","payload","token","getUserInfo","console","err","toast","Box","style","Grid","FormControl","variant","onSubmit","preventDefault","handleLogin","TextField","autoComplete","InputLabelProps","color","inputProps","onKeyPress","event","key","current","focus","label","type","fullWidth","margin","required","error","helperText","length","onChange","onFocus","inputRef","CustomButton","disabled","selectRegistration","state","registration","selectIsNameValid","createSelector","validationReqs","isNameValid","selectFormIsValid"],"sourceRoot":""}