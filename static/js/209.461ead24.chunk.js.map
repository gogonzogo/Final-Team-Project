{"version":3,"file":"static/js/209.461ead24.chunk.js","mappings":"oJAEMA,EAAY,SAAC,GAA2B,IAA1BC,EAAyB,EAAzBA,SAAUC,EAAe,EAAfA,UAC1B,OACI,gBAAKA,UAAWA,EAAhB,SAA4BD,GAEnC,EAEDD,EAAUG,UAAY,CAClBF,SAAUG,EAAAA,KAAAA,WACVF,UAAWG,EAAAA,QAGf,K,6ICZA,GAAgB,eAAiB,8BAA8B,WAAa,0BAA0B,UAAY,yBAAyB,aAAe,4BAA4B,gBAAkB,+BAA+B,cAAgB,6BAA6B,oBAAsB,mCAAmC,iBAAmB,gCAAgC,YAAc,4B,2ICkM9Y,EAjLkB,WAChB,IAAMC,GAAcC,EAAAA,EAAAA,QAAO,MACrBC,GAAeC,EAAAA,EAAAA,IAAYC,EAAAA,IAC3BC,GAAkBF,EAAAA,EAAAA,IAAYG,EAAAA,IAE9BC,GAAWC,EAAAA,EAAAA,MACXC,GAAMC,EAAAA,EAAAA,MAIZ,GAAgCC,EAAAA,EAAAA,UAAS,CACvCC,MAAO,GACPC,SAAU,KAFZ,eAAOC,EAAP,KAAiBC,EAAjB,KAKA,GAAwCJ,EAAAA,EAAAA,UAAS,IAAjD,eAAOK,EAAP,KAAqBC,EAArB,KAGMC,EAAe,SAAAC,GACnB,MAAwBA,EAAEC,OAAlBC,EAAR,EAAQA,KAAMC,EAAd,EAAcA,MAId,OAHAP,GAAY,kBAAKD,GAAN,cAAiBO,EAAOC,KAIjCD,GAEA,IAAK,QACHd,GAASgB,EAAAA,EAAAA,IAAc,CAAEC,WAAYF,KACrC,MACF,IAAK,WACHf,GAASkB,EAAAA,EAAAA,IAAiB,CAAED,WAAYF,KAK7C,EAGD,GAAoCX,EAAAA,EAAAA,UAAS,MAA7C,eAAOe,EAAP,KAAmBC,EAAnB,KAtCsB,wCAyCtB,wGAEYf,EAAoBE,EAApBF,MAAOC,EAAaC,EAAbD,SACTe,EAAW,CAAEhB,MAAOA,EAAMiB,cAAehB,SAAAA,GAHnD,SAI2BN,GAASuB,EAAAA,EAAAA,IAAMF,IAJ1C,cAKiBG,QAAQC,QACnBzB,GAAS0B,EAAAA,EAAAA,IAAa,CAAC,IACvBxB,EAAI,WAPV,gDAUIyB,QAAQC,IAAI,cAAeT,GAC3BC,EAAc,uCACdS,EAAAA,GAAAA,MAAY,uCAZhB,0DAzCsB,sBAiEtB,OACE,UAACC,EAAA,EAAD,CAAKzC,UAAW0C,EAAAA,eAAhB,WACE,eAAI1C,UAAW0C,EAAAA,WAAf,SAAiC,YACjC,SAACC,EAAA,GAAD,CAAM3C,UAAW0C,EAAAA,UAAjB,UAGE,SAACE,EAAA,EAAD,CAAaC,QAAQ,WAArB,UACE,kBAAMC,SAdd,SAAsBvB,GACpBA,EAAEwB,iBA3DkB,mCA4DpBC,GAEA7B,EAAY,CAAEH,MAAO,GAAIC,SAAU,IACpC,EASO,UACG,KAED,SAACgC,EAAA,EAAD,CACEjD,UAAW0C,EAAAA,YACXQ,gBACmB,UAAjB9B,GAA6Bd,EAEzB,CAAEoC,MAAO,CAAES,MAAO,YADlB,CAAET,MAAO,CAAES,MAAO,QAGxBC,WAAY,CACVC,WAAY,SAAAC,GAEE,UADIA,EAARC,KAENnD,EAAYoD,QAAQC,OAEvB,GAEHZ,QAAQ,WACRa,MAAM,QACNC,KAAK,QACLlC,KAAK,QACLmC,WAAS,EACTC,OAAO,SACPC,UAAQ,EACRC,MAAwB,UAAjB3C,IAA6Bd,EAEpC0D,WACG9C,EAASF,MAENV,GAAgBY,EAASF,MAAMiD,OAAS,GAC1C,iBAAMjE,UAAW0C,EAAAA,oBAAjB,SAA4C,iBAE5C,iBAAM1C,UAAW0C,EAAAA,cAAjB,SAAsC,eAJtC,WAOJhB,MAAOR,EAASF,MAChBkD,SAAU5C,EACV6C,QAAS,kBAAM9C,EAAgB,QAAtB,KAEX,SAAC4B,EAAA,EAAD,CACEjD,UAAW0C,EAAAA,eACXQ,gBACmB,aAAjB9B,GAAgCX,EAE5B,CAAEiC,MAAO,CAAES,MAAO,YADlB,CAAET,MAAO,CAAES,MAAO,QAGxBiB,SAAUhE,EACVyC,QAAQ,WACRa,MAAM,WACNC,KAAK,WACLlC,KAAK,WACLmC,WAAS,EACTC,OAAO,SACPC,UAAQ,EACRC,MAAwB,aAAjB3C,IAAgCX,EAEvCuD,WACG9C,EAASD,SAENR,GACF,iBAAMT,UAAW0C,EAAAA,oBAAjB,SAA4C,iBAE5C,iBAAM1C,UAAW0C,EAAAA,cAAjB,SAAsC,eAJtC,WAOJhB,MAAOR,EAASD,SAChBiD,SAAU5C,EACV6C,QAAS,kBAAM9C,EAAgB,WAAtB,KAeX,UAACoB,EAAA,EAAD,CAAKzC,UAAW0C,EAAAA,iBAAhB,WACE,SAAC2B,EAAA,EAAD,CACExB,QAAQ,YACRc,KAAK,SACLW,UAAWhE,IAAiBG,EAC5BT,UAAW0C,EAAAA,aAJb,SAKC,YAGD,SAAC,KAAD,CAAM6B,GAAG,YAAT,UACE,SAACF,EAAA,EAAD,CAAQxB,QAAQ,YAAY7C,UAAW0C,EAAAA,gBAAvC,SAA8D,2BAU7E,E,UChLD,MAbA,WACE,OAEC,gBAAK1C,UAAU,4BAAf,UACA,oBAASA,UAAU,aAAnB,UACA,SAACF,EAAA,EAAD,CAAWE,UAAU,aAArB,UACK,SAAC,EAAD,SAKP,C,8ICZKwE,EAAqB,SAACC,GAAD,OAAWA,EAAMC,YAAjB,EAmBdC,IAhB2BC,EAAAA,EAAAA,IACtC,CAACJ,IACD,SAACE,GAAD,OAAkBA,EAAaG,eAAepD,IAA9C,KAGuCmD,EAAAA,EAAAA,IACvC,CAACJ,IACD,SAACE,GAAD,OAAkBA,EAAaG,eAAe7D,KAA9C,KAG0C4D,EAAAA,EAAAA,IAC1C,CAACJ,IACD,SAACE,GAAD,OAAkBA,EAAaG,eAAe5D,QAA9C,KAI+B2D,EAAAA,EAAAA,IAC/B,CAACJ,IACD,SAACE,GAAD,OAAkBA,EAAaI,WAA/B,KAGWtE,GAAqBoE,EAAAA,EAAAA,IAChC,CAACJ,IACD,SAACE,GAAD,OAAkBA,EAAapE,YAA/B,IAGWI,GAAwBkE,EAAAA,EAAAA,IACnC,CAACJ,IACD,SAACE,GAAD,OAAkBA,EAAajE,eAA/B,IAIWsE,GAAoBH,EAAAA,EAAAA,IAC/B,CAACD,EAAmBnE,EAAoBE,IACxC,SAACoE,EAAaxE,EAAcG,GAA5B,OACEqE,GAAexE,GAAgBG,CADjC,G","sources":["components/Container/Container.jsx","webpack://final-team-project/./src/components/LoginForm/login.module.css?916a","components/LoginForm/LoginForm.jsx","pages/Login/Login.jsx","redux/validation/registrationSelectors.js"],"sourcesContent":["import { node, string } from 'prop-types';\n\nconst Container = ({children, className}) => {\n    return (\n        <div className={className}>{children}</div>\n    )\n};\n\nContainer.propTopes = {\n    children: node.isRequired,\n    className: string\n};\n\nexport default Container ;","// extracted by mini-css-extract-plugin\nexport default {\"form_container\":\"login_form_container__K4jsj\",\"form_title\":\"login_form_title__Wyom9\",\"form_grid\":\"login_form_grid__1MIvp\",\"login_button\":\"login_login_button__DZPBF\",\"register_button\":\"login_register_button__HHbVE\",\"error_message\":\"login_error_message__WE-l0\",\"error_message_valid\":\"login_error_message_valid__NbF4o\",\"button_container\":\"login_button_container__Evbbt\",\"email_input\":\"login_email_input__bl6Jx\"};","import React from 'react';\nimport { useState, useRef } from 'react';\nimport style from '../LoginForm/login.module.css';\nimport { Box, FormControl, TextField, Button, Grid } from '@mui/material';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { login } from 'redux/auth/authOperations';\nimport { useDispatch, useSelector } from 'react-redux';\nimport {\n  selectIsEmailValid,\n  selectIsPasswordValid,\n} from '../../redux/validation/registrationSelectors';\nimport {\n  validateEmail,\n  validatePassword,\n} from '../../redux/validation/registrationSlice';\nimport { toast } from 'react-toastify';\nimport { getUserStats } from 'redux/Calc/calcOperations';\n\nconst LoginForm = () => {\n  const passwordRef = useRef(null);\n  const isEmailValid = useSelector(selectIsEmailValid);\n  const isPasswordValid = useSelector(selectIsPasswordValid);\n  // const isFormValid = useSelector(selectFormIsValid);\n  const dispatch = useDispatch();\n  const nav = useNavigate(); // react router hook\n  // const validationReqs = useSelector((state) => state.registration.validationReqs); // gets validation requirements from the slice\n\n  // form data state\n  const [formData, setFormData] = useState({\n    email: '',\n    password: '',\n  });\n  // used to set the focused text field\n  const [focusedField, setFocusedField] = useState('');\n\n  // listens to input change\n  const handleChange = e => {\n    const { name, value } = e.target;\n    setFormData({ ...formData, [name]: value });\n    // check if email is valid\n\n    switch (\n      name // dispatches validation reducers from the slice on change\n    ) {\n      case 'email':\n        dispatch(validateEmail({ fieldValue: value }));\n        break;\n      case 'password':\n        dispatch(validatePassword({ fieldValue: value }));\n        break;\n      default:\n        break;\n    }\n  };\n\n  // listens to form submission and looks for errors\n  const [loginError, setLoginError] = useState(null);\n\n  // handles login\n  async function handleLogin() {\n    try {\n      const { email, password } = formData;\n      const senddata = { email: email.toLowerCase(), password };\n      const response = await dispatch(login(senddata));\n      if (response.payload.token) {\n        dispatch(getUserStats({}));\n        nav('/diary');\n      }\n    } catch (err) {\n      console.err('Login error', loginError);\n      setLoginError('An error occured. Please try again.');\n      toast.error('An error occured. Please try again.');\n    }\n  }\n\n  // handles form submission\n  function handleSubmit(e) {\n    e.preventDefault();\n    handleLogin(); // calls the login function\n    // clear the form data after submission\n    setFormData({ email: '', password: '' });\n  }\n\n  return (\n    <Box className={style.form_container}>\n      <h2 className={style.form_title}>LOG IN</h2>\n      <Grid className={style.form_grid}>\n        {/* login form */}\n\n        <FormControl variant=\"standard\">\n          <form onSubmit={handleSubmit}>\n            {' '}\n            {/*pass validatioon schema */}\n            <TextField\n              className={style.email_input}\n              InputLabelProps={\n                focusedField === 'email' && !isEmailValid\n                  ? { style: { color: 'red' } }\n                  : { style: { color: '#9B9FAA' } }\n              }\n              inputProps={{\n                onKeyPress: event => {\n                  const { key } = event;\n                  if (key === 'Enter') {\n                    passwordRef.current.focus();\n                  }\n                },\n              }}\n              variant=\"standard\"\n              label=\"Email\"\n              type=\"email\"\n              name=\"email\"\n              fullWidth\n              margin=\"normal\"\n              required\n              error={focusedField === 'email' && !isEmailValid}\n              // styles the input field and checks whether email is not valid and when it is valid\n              helperText={\n                !formData.email ? (\n                  'Required'\n                ) : isEmailValid && formData.email.length > 3 ? (\n                  <span className={style.error_message_valid}>Checks out!</span>\n                ) : (\n                  <span className={style.error_message}>Not quite!</span>\n                )\n              }\n              value={formData.email}\n              onChange={handleChange}\n              onFocus={() => setFocusedField('email')}\n            />\n            <TextField\n              className={style.password_input}\n              InputLabelProps={\n                focusedField === 'password' && !isPasswordValid\n                  ? { style: { color: 'red' } }\n                  : { style: { color: '#9B9FAA' } }\n              }\n              inputRef={passwordRef}\n              variant=\"standard\"\n              label=\"Password\"\n              type=\"password\"\n              name=\"password\"\n              fullWidth\n              margin=\"normal\"\n              required\n              error={focusedField === 'password' && !isPasswordValid}\n              // styles the input field and checks whether password is not valid and when it is valid\n              helperText={\n                !formData.password ? (\n                  'Required'\n                ) : isPasswordValid ? (\n                  <span className={style.error_message_valid}>Checks out!</span>\n                ) : (\n                  <span className={style.error_message}>Not quite!</span>\n                )\n              }\n              value={formData.password}\n              onChange={handleChange}\n              onFocus={() => setFocusedField('password')}\n            />\n            {/* if password is not longer than 5 number and email is not longer than 5 chars then disable button  */}\n            {/* {isEmailValid && isPasswordValid ? (\n              <Box className={style.button_container}>\n                <Button variant=\"contained\" className={style.login_button}>\n                  Log In\n                </Button>\n                <Link to=\"/Register\">\n                  <Button variant=\"contained\" className={style.register_button}>\n                    Register\n                  </Button>\n                </Link>\n              </Box>\n            ) : ( */}\n            <Box className={style.button_container}>\n              <Button\n                variant=\"contained\"\n                type=\"submit\"\n                disabled={!isEmailValid || !isPasswordValid}\n                className={style.login_button}\n              >\n                Log In\n              </Button>\n              <Link to=\"/Register\">\n                <Button variant=\"contained\" className={style.register_button}>\n                  Register\n                </Button>\n              </Link>\n            </Box>\n          </form>\n        </FormControl>\n      </Grid>\n    </Box>\n  );\n};\n\nexport default LoginForm;\n","import React from 'react'\nimport LoginForm from '../../components/LoginForm/LoginForm'\nimport Container from 'components/Container/Container'\n\nfunction Login() {\n  return (\n    // imported my form here to see it get rendered \n   <div className=\"background mainBackground\">\n   <section className=\"top-bottom\">\n   <Container className=\"left-right\">\n        <LoginForm />\n   </Container>\n   </section>\n   </div>\n  )\n}\n\nexport default Login\n","import { createSelector } from 'reselect';\n\n// Select the registration slice from the Redux store\nconst selectRegistration = (state) => state.registration;\n\n// Select individual validation requirements\nexport const selectNameValidationReqs = createSelector(\n  [selectRegistration],\n  (registration) => registration.validationReqs.name\n);\n\nexport const selectEmailValidationReqs = createSelector(\n  [selectRegistration],\n  (registration) => registration.validationReqs.email\n);\n\nexport const selectPasswordValidationReqs = createSelector(\n  [selectRegistration],\n  (registration) => registration.validationReqs.password\n);\n\n// Select individual field validation states - this works then?\nexport const selectIsNameValid = createSelector(\n  [selectRegistration],\n  (registration) => registration.isNameValid \n);\n\nexport const selectIsEmailValid = createSelector(\n  [selectRegistration],\n  (registration) => registration.isEmailValid \n);\n\nexport const selectIsPasswordValid = createSelector(\n  [selectRegistration],\n  (registration) => registration.isPasswordValid \n);\n\n// Select the overall form validity\nexport const selectFormIsValid = createSelector(\n  [selectIsNameValid, selectIsEmailValid, selectIsPasswordValid],\n  (isNameValid, isEmailValid, isPasswordValid) =>\n    isNameValid && isEmailValid && isPasswordValid\n);"],"names":["Container","children","className","propTopes","node","string","passwordRef","useRef","isEmailValid","useSelector","selectIsEmailValid","isPasswordValid","selectIsPasswordValid","dispatch","useDispatch","nav","useNavigate","useState","email","password","formData","setFormData","focusedField","setFocusedField","handleChange","e","target","name","value","validateEmail","fieldValue","validatePassword","loginError","setLoginError","senddata","toLowerCase","login","payload","token","getUserStats","console","err","toast","Box","style","Grid","FormControl","variant","onSubmit","preventDefault","handleLogin","TextField","InputLabelProps","color","inputProps","onKeyPress","event","key","current","focus","label","type","fullWidth","margin","required","error","helperText","length","onChange","onFocus","inputRef","Button","disabled","to","selectRegistration","state","registration","selectIsNameValid","createSelector","validationReqs","isNameValid","selectFormIsValid"],"sourceRoot":""}